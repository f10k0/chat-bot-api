<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ Express –ß–∞—Ç-–ë–æ—Ç</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>ü§ñ Express –ß–∞—Ç-–ë–æ—Ç</h1>
            <p>RESTful API –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –±–æ—Ç–æ–º</p>
        </div>
        
        <!-- –ë–ª–æ–∫ –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏ -->
        <div class="user-name-input" id="nameInputContainer">
            <h3>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:</h3>
            <input 
                type="text" 
                id="userNameInput" 
                placeholder="–í–∞—à–µ –∏–º—è..."
                onkeypress="if(event.key === 'Enter') setUserName()"
            >
            <button onclick="setUserName()">–ù–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</button>
            
            <div class="api-preview">
                <p><strong>API –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:</strong></p>
                <code>http://localhost:3000/api/chat</code>
                <div class="api-methods">
                    <span class="method get">GET</span>
                    <span class="method post">POST</span>
                    <span class="method put">PUT</span>
                    <span class="method delete">DELETE</span>
                </div>
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ -->
        <div class="chat-main" id="chatMain" style="display: none;">
            <div class="user-info">
                <span>–í—ã: <strong id="currentUserName">–ì–æ—Å—Ç—å</strong></span>
                <div class="user-actions">
                    <button onclick="showApiInfo()" class="api-btn">API –ò–Ω—Ñ–æ</button>
                    <button onclick="changeUserName()">–°–º–µ–Ω–∏—Ç—å –∏–º—è</button>
                </div>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π -->
            <div class="chat-messages" id="messagesContainer">
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
            
            <!-- –ë–ª–æ–∫ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="chat-input">
                <input 
                    type="text" 
                    id="messageInput" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                    onkeypress="if(event.key === 'Enter') sendMessage()"
                >
                <button onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
            
            <!-- –ë–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
            <div class="chat-info">
                <div class="api-links">
                    <a href="/api/chat" target="_blank" class="api-link">üì° API (JSON)</a>
                    <a href="/api/chat/bot/response?message=–ü—Ä–∏–≤–µ—Ç" target="_blank" class="api-link">ü§ñ –¢–µ—Å—Ç API</a>
                </div>
                <div class="buttons">
                    <button onclick="loadMessages()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    <button onclick="clearChat()" class="danger">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± API -->
    <div class="modal-overlay" id="apiModal" style="display: none;">
        <div class="modal-content">
            <h2>üìö REST API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h2>
            <div class="endpoint">
                <h3><span class="method get">GET</span> /api/chat</h3>
                <p>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è</p>
                <code>fetch('/api/chat').then(r => r.json())</code>
            </div>
            
            <div class="endpoint">
                <h3><span class="method get">GET</span> /api/chat/:id</h3>
                <p>–ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ ID</p>
                <code>fetch('/api/chat/1')</code>
            </div>
            
            <div class="endpoint">
                <h3><span class="method post">POST</span> /api/chat</h3>
                <p>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</p>
                <code>fetch('/api/chat', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({text: "–ü—Ä–∏–≤–µ—Ç", user: "–ò–º—è"})
})</code>
            </div>
            
            <div class="endpoint">
                <h3><span class="method get">GET</span> /api/chat/bot/response?message=—Ç–µ–∫—Å—Ç</h3>
                <p>–ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –±–æ—Ç–∞</p>
                <code>fetch('/api/chat/bot/response?message=–ü—Ä–∏–≤–µ—Ç&userName=–ò–≤–∞–Ω')</code>
            </div>
            
            <div class="endpoint">
                <h3><span class="method put">PUT</span> /api/chat/:id</h3>
                <p>–û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</p>
                <code>fetch('/api/chat/1', {
  method: 'PUT',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({text: "–ù–æ–≤—ã–π —Ç–µ–∫—Å—Ç"})
})</code>
            </div>
            
            <div class="endpoint">
                <h3><span class="method delete">DELETE</span> /api/chat/:id</h3>
                <p>–£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</p>
                <code>fetch('/api/chat/1', {method: 'DELETE'})</code>
            </div>
            
            <button onclick="hideApiInfo()" class="close-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script src="chat.js"></script>
</body>
</html>